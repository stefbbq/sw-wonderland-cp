"use strict";function md5cycle(a,b){var c=a[0],d=a[1],e=a[2],f=a[3];c=ff(c,d,e,f,b[0],7,-680876936),f=ff(f,c,d,e,b[1],12,-389564586),e=ff(e,f,c,d,b[2],17,606105819),d=ff(d,e,f,c,b[3],22,-1044525330),c=ff(c,d,e,f,b[4],7,-176418897),f=ff(f,c,d,e,b[5],12,1200080426),e=ff(e,f,c,d,b[6],17,-1473231341),d=ff(d,e,f,c,b[7],22,-45705983),c=ff(c,d,e,f,b[8],7,1770035416),f=ff(f,c,d,e,b[9],12,-1958414417),e=ff(e,f,c,d,b[10],17,-42063),d=ff(d,e,f,c,b[11],22,-1990404162),c=ff(c,d,e,f,b[12],7,1804603682),f=ff(f,c,d,e,b[13],12,-40341101),e=ff(e,f,c,d,b[14],17,-1502002290),d=ff(d,e,f,c,b[15],22,1236535329),c=gg(c,d,e,f,b[1],5,-165796510),f=gg(f,c,d,e,b[6],9,-1069501632),e=gg(e,f,c,d,b[11],14,643717713),d=gg(d,e,f,c,b[0],20,-373897302),c=gg(c,d,e,f,b[5],5,-701558691),f=gg(f,c,d,e,b[10],9,38016083),e=gg(e,f,c,d,b[15],14,-660478335),d=gg(d,e,f,c,b[4],20,-405537848),c=gg(c,d,e,f,b[9],5,568446438),f=gg(f,c,d,e,b[14],9,-1019803690),e=gg(e,f,c,d,b[3],14,-187363961),d=gg(d,e,f,c,b[8],20,1163531501),c=gg(c,d,e,f,b[13],5,-1444681467),f=gg(f,c,d,e,b[2],9,-51403784),e=gg(e,f,c,d,b[7],14,1735328473),d=gg(d,e,f,c,b[12],20,-1926607734),c=hh(c,d,e,f,b[5],4,-378558),f=hh(f,c,d,e,b[8],11,-2022574463),e=hh(e,f,c,d,b[11],16,1839030562),d=hh(d,e,f,c,b[14],23,-35309556),c=hh(c,d,e,f,b[1],4,-1530992060),f=hh(f,c,d,e,b[4],11,1272893353),e=hh(e,f,c,d,b[7],16,-155497632),d=hh(d,e,f,c,b[10],23,-1094730640),c=hh(c,d,e,f,b[13],4,681279174),f=hh(f,c,d,e,b[0],11,-358537222),e=hh(e,f,c,d,b[3],16,-722521979),d=hh(d,e,f,c,b[6],23,76029189),c=hh(c,d,e,f,b[9],4,-640364487),f=hh(f,c,d,e,b[12],11,-421815835),e=hh(e,f,c,d,b[15],16,530742520),d=hh(d,e,f,c,b[2],23,-995338651),c=ii(c,d,e,f,b[0],6,-198630844),f=ii(f,c,d,e,b[7],10,1126891415),e=ii(e,f,c,d,b[14],15,-1416354905),d=ii(d,e,f,c,b[5],21,-57434055),c=ii(c,d,e,f,b[12],6,1700485571),f=ii(f,c,d,e,b[3],10,-1894986606),e=ii(e,f,c,d,b[10],15,-1051523),d=ii(d,e,f,c,b[1],21,-2054922799),c=ii(c,d,e,f,b[8],6,1873313359),f=ii(f,c,d,e,b[15],10,-30611744),e=ii(e,f,c,d,b[6],15,-1560198380),d=ii(d,e,f,c,b[13],21,1309151649),c=ii(c,d,e,f,b[4],6,-145523070),f=ii(f,c,d,e,b[11],10,-1120210379),e=ii(e,f,c,d,b[2],15,718787259),d=ii(d,e,f,c,b[9],21,-343485551),a[0]=add32(c,a[0]),a[1]=add32(d,a[1]),a[2]=add32(e,a[2]),a[3]=add32(f,a[3])}function cmn(a,b,c,d,e,f){return b=add32(add32(b,a),add32(d,f)),add32(b<<e|b>>>32-e,c)}function ff(a,b,c,d,e,f,g){return cmn(b&c|~b&d,a,b,e,f,g)}function gg(a,b,c,d,e,f,g){return cmn(b&d|c&~d,a,b,e,f,g)}function hh(a,b,c,d,e,f,g){return cmn(b^c^d,a,b,e,f,g)}function ii(a,b,c,d,e,f,g){return cmn(c^(b|~d),a,b,e,f,g)}function md51(a){var b,c=a.length,d=[1732584193,-271733879,-1732584194,271733878];for(b=64;b<=a.length;b+=64)md5cycle(d,md5blk(a.substring(b-64,b)));a=a.substring(b-64);var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;b<a.length;b++)e[b>>2]|=a.charCodeAt(b)<<(b%4<<3);if(e[b>>2]|=128<<(b%4<<3),b>55)for(md5cycle(d,e),b=0;16>b;b++)e[b]=0;return e[14]=8*c,md5cycle(d,e),d}function md5blk(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a.charCodeAt(b)+(a.charCodeAt(b+1)<<8)+(a.charCodeAt(b+2)<<16)+(a.charCodeAt(b+3)<<24);return c}function rhex(a){for(var b="",c=0;4>c;c++)b+=hex_chr[a>>8*c+4&15]+hex_chr[a>>8*c&15];return b}function hex(a){for(var b=0;b<a.length;b++)a[b]=rhex(a[b]);return a.join("")}function md5(a){return hex(md51(a))}function add32(a,b){return a+b&4294967295}function add32(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}var basePath=basePath||"",viewExt=viewExt||".html";angular.module("wplAdmin",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ui.mask","angularFileUpload"]).config(["$routeProvider",function(a){a.when("/listClients",{templateUrl:basePath+"views/listClients"+viewExt,controller:"ClientListCtrl"}).when("/addClient",{templateUrl:basePath+"views/editClient"+viewExt,controller:"EditClientCtrl"}).when("/editClient",{templateUrl:basePath+"views/editClient"+viewExt,controller:"EditClientCtrl"}).when("/addClientUser",{templateUrl:basePath+"views/editClientUser"+viewExt,controller:"EditClientUserCtrl"}).when("/editClientUser",{templateUrl:basePath+"views/editClientUser"+viewExt,controller:"EditClientUserCtrl"}).when("/clientDetail",{templateUrl:basePath+"views/clientDetail"+viewExt,controller:"ClientDetailCtrl"}).when("/clientUserDetail",{templateUrl:basePath+"views/clientUserDetail"+viewExt,controller:"ClientUserDetailCtrl"}).when("/addAdminUser",{templateUrl:basePath+"views/editAdminUser"+viewExt,controller:"EditAdminUserCtrl"}).when("/editAdminUser",{templateUrl:basePath+"views/editAdminUser"+viewExt,controller:"EditAdminUserCtrl"}).when("/changeAdminPassword",{templateUrl:basePath+"views/changeAdminPassword"+viewExt,controller:"ChangeAdminPasswordCtrl"}).when("/listAdminUsers",{templateUrl:basePath+"views/listAdminUsers"+viewExt,controller:"AdminListCtrl"}).when("/addCollateral",{templateUrl:basePath+"views/editCollateral"+viewExt,controller:"EditCollateralCtrl"}).when("/editCollateral",{templateUrl:basePath+"views/editCollateral"+viewExt,controller:"EditCollateralCtrl"}).when("/collateralDetail",{templateUrl:basePath+"views/collateralDetail"+viewExt,controller:"CollateralDetailCtrl"}).when("/listCollateral",{templateUrl:basePath+"views/listCollateral"+viewExt,controller:"CollateralListCtrl"}).otherwise({redirectTo:"/listClients"})}]).run(["$rootScope","$location","$cookieStore",function(a,b,c){if(a.adminData=c.get("adminData"),void 0===a.adminData||!a.adminData.isAdmin)return void(window.location.href="./login.html");var d=!1;switch(b.host()){case"wonderland-cp.stagebot.net":a.wsURL="http://wonderland-cp.stagebot.net/webservice/WPLAdmin.php?callback=JSON_CALLBACK",a.wsUploadURL="http://wonderland-cp.stagebot.net/webservice/WPLAdmin.php";break;case"localhost":a.wsURL="http://localhost:81/wonderlandws/WPLAdmin.php?callback=JSON_CALLBACK",a.wsUploadURL="http://localhost:81/wonderlandws/WPLAdmin.php",d&&(a.wsURL="http://wonderland-cp.stagebot.net/webservice/WPLAdmin.php?callback=JSON_CALLBACK")}a.jsonHeader={"Content-Type":"application/x-www-form-urlencoded"},a.clientList={pageSize:3},a.collateralList={pageSize:3},a.collateralList_full={pageSize:10},a.getFormVars=function(a){var b={};for(var c in a)isNaN(Number(c))&&(b[c]=a[c]);return b}}]).controller("MenuController",["$scope",function(a){a.getClass=function(a){var b=window.location.hash.substr(1);return b===a?"active":""}}]),angular.module("wplAdmin").factory("clientService",["$http","$rootScope",function(a,b){function c(c,d,e){var f={action:"clientList",s:c,c:k,a:d?"1":"0"};a.jsonp(b.wsURL,{params:f,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){angular.copy(a.data.list,l);var b=a.data.count;e(b)}).error(function(a){console.log("error",a)})}function d(c){var d={action:"clientListAll"};a.jsonp(b.wsURL,{params:d,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){angular.copy(a.data.list,l);var b=a.data.count;c(b)}).error(function(a){console.log("error",a)})}function e(c,d,e,f){var g={action:"clientSearch",s:c,c:k,q:d,a:e?"1":"0"};a.jsonp(b.wsURL,{params:g,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){angular.copy(a.data.list,l);var b=a.data.count;f(b)}).error(function(a){console.log("error",a)})}function f(c,d,e){var f=c;f.action=d,a.jsonp(b.wsURL,{params:f,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(){e()}).error(function(a){console.log("error",a)})}function g(c,d){var e={action:"clientDetail",q:c};a.jsonp(b.wsURL,{params:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){angular.copy(a.data,m),d&&d(m)}).error(function(a){console.log("error",a)})}function h(c,d){var e={action:"deactivateClient",guid:c};a.jsonp(b.wsURL,{params:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(){d&&d()}).error(function(a){console.log("error",a)})}function i(c,d){var e={action:"reactivateClient",guid:c};a.jsonp(b.wsURL,{params:e,header:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(){d&&d()}).error(function(a){console.log("error",a)})}function j(){}var k=b.clientList.pageSize,l=[],m={};return{loadList:c,loadListAll:d,list:l,search:e,save:f,loadDetails:g,loadCollateral:j,deactivate:h,reactivate:i,details:m}}]),angular.module("wplAdmin").factory("clientUserService",["$http","$rootScope",function(a,b){function c(c,d,e){var f={action:"clientUserList",id:c,a:d?"1":"0"};a.jsonp(b.wsURL,{params:f,headers:b.jsonHeader}).success(function(a){angular.copy(a.data.list,j),e&&e()}).error(function(a){console.log("error",a)})}function d(c,d,e){var f=c;f.action=d,a.jsonp(b.wsURL,{params:f,headers:b.jsonHeader}).success(function(){e&&e()}).error(function(a){console.log("error",a)})}function e(c,d){var e={action:"clientUserDetail",id:c};a.jsonp(b.wsURL,{params:e,headers:b.jsonHeader}).success(function(a){console.log(a),angular.copy(a.data.user,h),angular.copy(a.data.company,i),d&&d(h)}).error(function(a){console.log("error",a)})}function f(c,d){var e={action:"deactivateClientUser",guid:c};a.jsonp(b.wsURL,{params:e,headers:b.jsonHeader}).success(function(){d&&d()}).error(function(a){console.log("error",a)})}function g(c,d){var e={action:"reactivateClientUser",guid:c};a.jsonp(b.wsURL,{params:e,headers:b.jsonHeader}).success(function(){d&&d()}).error(function(a){console.log("error",a)})}var h={},i={},j=[];return{loadList:c,list:j,loadDetails:e,user:h,client:i,save:d,deactivate:f,reactivate:g}}]),angular.module("wplAdmin").factory("adminUserService",["$http","$rootScope",function(a,b){function c(c,d,e){var f={action:"adminUserList",id:c,a:d?1:0};a.jsonp(b.wsURL,{params:f,headers:b.jsonHeader}).success(function(a){angular.copy(a.data.list,k),e&&e()}).error(function(a){console.log("error",a)})}function d(c,d,e){var f=c;f.action=d,a.jsonp(b.wsURL,{params:f,headers:b.jsonHeader}).success(function(){e&&e()}).error(function(a){console.log("error",a)})}function e(c,d){var e=c;e.action="changeAdminPassword",a.jsonp(b.wsURL,{params:e,headers:b.jsonHeader}).success(function(a){d&&d(a)}).error(function(a){console.log("error",a)})}function f(c,d){var e={action:"adminUserDetail",id:c};a.jsonp(b.wsURL,{params:e,headers:b.jsonHeader}).success(function(a){console.log(a),angular.copy(a.data,i),d&&d(i)}).error(function(a){console.log("error",a)})}function g(c,d){var e={action:"deactivateClientUser",guid:c};a.jsonp(b.wsURL,{params:e,headers:b.jsonHeader}).success(function(){d&&d()}).error(function(a){console.log("error",a)})}function h(c,d){var e={action:"reactivateClientUser",guid:c};a.jsonp(b.wsURL,{params:e,headers:b.jsonHeader}).success(function(){d&&d()}).error(function(a){console.log("error",a)})}var i={},j={},k=[];return{loadList:c,list:k,loadDetails:f,user:i,changePassword:e,client:j,save:d,deactivate:g,reactivate:h}}]),angular.module("wplAdmin").factory("collateralService",["$http","$rootScope","$upload",function(a,b,c){function d(c,d,e,f){var g={action:"collateralList",clientID:c,s:d,c:o,a:e?"1":"0"};a.jsonp(b.wsURL,{params:g,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){angular.copy(a.data.list,p);var b=a.data.count;f(b)}).error(function(a){console.log("error",a)})}function e(c,d,e,f,g){var h={action:"collateralSearch",clientID:c,s:e,c:o,q:d,a:f?"1":"0"};a.jsonp(b.wsURL,{params:h,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){angular.copy(a.data.list,p),console.log(p);var b=a.data.count;g(b)}).error(function(a){console.log("error",a)})}function f(c,d,e){var f={action:"collateralListFull",s:c,c:b.collateralList_full.pageSize,a:d?"1":"0"};a.jsonp(b.wsURL,{params:f,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){angular.copy(a.data.list,p);var b=a.data.count;e(b)}).error(function(a){console.log("error",a)})}function g(c,d,e,f){var g={action:"collateralSearchFull",s:d,c:o,q:c,a:e?"1":"0"};a.jsonp(b.wsURL,{params:g,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){angular.copy(a.data.list,p),console.log(p);var b=a.data.count;f(b)}).error(function(a){console.log("error",a)})}function h(c,d,e,f){console.log(c);var g={id:c.guid,client_id:c.client_id,name:c.name,type:c.type,description:c.description};g.action=d,a.jsonp(b.wsURL,{params:g,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){var b=a.data.id;i("thumb",b,c.thumbFile,e,function(){i("file",b,c.file,e,function(){f()})})}).error(function(a){console.log("error",a)})}function i(a,d,e,f,g){if(console.log("collateralID",d),null==e)return void g();console.log("uploadingFile");var h=b.wsUploadURL+"?action=upload"+("thumb"==a?"Thumb":"File");c.upload({url:h,method:"POST",data:{id:d},file:e}).progress(function(a){f&&f(a)}).success(function(){g()})}function j(c,d){var e={action:"collateralDetail",id:c};a.jsonp(b.wsURL,{params:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){angular.copy(a.data,q),d&&d(q)}).error(function(a){console.log("error",a)})}function k(c,d){var e={action:"deactivateCollateral",guid:c};a.jsonp(b.wsURL,{params:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(){d&&d()}).error(function(a){console.log("error",a)})}function l(c,d){var e={action:"reactivateCollateral",guid:c};a.jsonp(b.wsURL,{params:e,header:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(){d&&d()}).error(function(a){console.log("error",a)})}function m(a){var b=[];return b.push({id:"booklet",name:"Booklet"}),b.push({id:"leaflet",name:"Leaflet"}),b.push({id:"directMail",name:"Direct Mail"}),b.push({id:"poster",name:"Poster"}),b.push({id:"stationary",name:"Stationary"}),b.push({id:"businessCards",name:"Business Cards"}),b.push({id:"folder",name:"Folder"}),b.push({id:"packaging",name:"Packaging"}),b.push({id:"customBox",name:"Custom Box"}),b.push({id:"binder",name:"Binder"}),b.push({id:"hrRecruitment",name:"HR Recruitment"}),b.push({id:"largeFormat",name:"Large Format"}),b.push({id:"special_other",name:"Special / Other"}),angular.copy(b,r),a&&a(b),b}function n(a){for(var b=m(),c="",d=0;d<b.length;d++)if(b[d].id===a){c=b[d].name;break}return c}var o=b.clientList.pageSize,p=[],q={},r=[];return{loadList:d,loadListFull:f,list:p,types:r,getCollateralTypeLabel:n,loadTypeList:m,search:e,searchAll:g,save:h,loadDetails:j,deactivate:k,reactivate:l,details:q}}]),angular.module("wplAdmin").directive("capitalizeFirst",function(){return{require:"ngModel",link:function(a,b,c,d){var e=function(a){if(void 0!==a){var b=a.charAt(0).toUpperCase()+a.substr(1);return b!==a&&(d.$setViewValue(b),d.$render()),b}return""};d.$parsers.push(e),e(a[c.ngModel])}}}).directive("capitalize",function(){return{require:"ngModel",link:function(a,b,c,d){var e=function(a){if(void 0!==a){var b=a.toUpperCase();return b!==a&&(d.$setViewValue(b),d.$render()),b}return""};d.$parsers.push(e),e(a[c.ngModel])}}}),angular.module("wplAdmin").directive("match",function(){return{require:"ngModel",restrict:"A",scope:{match:"="},link:function(a,b,c,d){a.$watch(function(){return d.$pristine&&angular.isUndefined(d.$modelValue)||a.match===d.$modelValue},function(a){d.$setValidity("match",a)})}}}),angular.module("wplAdmin").directive("pagerComplete",["$timeout",function(a){return{link:function(b){b.$last===!0&&a(function(){b.$emit("pagerComplete")})}}}]),angular.module("wplAdmin").filter("tel",function(){return function(a){if(!a)return"";var b=a.toString().trim(),c=b.substr(0,3),d=b.substr(2,3),e=b.substr(6);return"("+c+") "+d+"-"+e}}),angular.module("wplAdmin").filter("cleanup",function(){return function(a){return a?a.replace("\\",""):""}});var $=$;angular.module("wplAdmin").controller("SearchCtrl",["$scope",function(a){a.doSearch=function(){a.$emit("searchClients",0,a.searchString)}}]).controller("ClientListCtrl",["$scope","$http","$location","$rootScope","clientService",function(a,b,c,d,e){function f(b){i=b,a.clientService.loadList(i,j,function(b){a.$broadcast("clientResultsLoaded",b)})}function g(b,c){i=b,h=c,a.clientService.search(i,h,j,function(b){a.$broadcast("clientResultsLoaded",b)})}a.companies=[],a.clientService=e,a.clientService.list=e.list;var h,i,j=!0,k="list",l="search",m=k;a.$on("loadClientPage",function(a,b){f(b)}),a.$on("searchClients",function(a,b,c){h=c,void 0===h||0===h.length?f(b):g(b,h)}),a.onAddClient=function(){c.path("/addClient")},a.showClient=function(a){c.path("/clientDetail").search({id:a})},a.listActive=function(a){j=a,m===l?g(0,h):f(0)},a.getActiveClass=function(a){return j===a?"active":void 0},f(0)}]).controller("ClientListPager",["$scope","$http","$rootScope",function(a,b,c){function d(){$(".page-numbers a").removeClass("selected");var a=$($(".page-numbers a")[f]);a.addClass("selected")}var e=[],f=0;a.pages=[],a.$on("clientResultsLoaded",function(b,d){var f=c.clientList.pageSize,g=Math.ceil(d/f),h=0;e.length=0;for(var i=0;g>i;i++)e.push({num:i+1,recordNum:h}),h+=f;angular.copy(e,a.pages)}),a.prevPage=function(){f>0&&a.loadPage(f-1)},a.nextPage=function(){f<e.length-1&&a.loadPage(f+1)},a.loadPage=function(b){f=b;var c=e[b];a.$emit("loadClientPage",c.recordNum),d()},a.$on("pagerComplete",function(){d()})}]),angular.module("wplAdmin").controller("EditClientCtrl",["$scope","$http","$location","$rootScope","clientService",function(a,b,c,d,e){function f(){switch(h(),c.path()){case"/addClient":j=!0,a.title="Add New Client",k="addClient",a.company.guid="";break;case"/editClient":j=!1,a.title="Edit Client",k="updateClient",a.clientService=e,g()}}function g(){var b=c.search().id;a.clientService.loadDetails(b,function(b){angular.copy(b,a.company)})}function h(){m.push(new i("Oscorp","norman.osborne@oscorp.com")),m.push(new i("Extensive Enterprises","tomax@extensiveenterprises.com")),m.push(new i("Daily Planet","lois.lane@dailyplanet.com")),m.push(new i("Daily Bugle","jjjameson@dailybugle.com"))}function i(a,b){var c={};return c.name=a,c.address="100 This St.",c.city="Anytown",c.province="ON",c.postalCode="H1H 1H1",c.email=b,c.phone1="5555555555",c.phone2="5555555556",c.repEmail="wplAccount@wpl.com",c}var j,k;a.company={},a.save=function(a){e.save(a,k,function(){var a;j?(a="company added",alert(a),c.path("/listClients")):(a="company updated",alert(a),c.path("/listClients"))})},a.cancel=function(){window.history.back()};var l=0;a.autofill=function(){m[l++];angular.copy(l,a.company),l>=m.length&&(l=0)};var m=[];f()}]);var $=$;angular.module("wplAdmin").controller("ClientDetailCtrl",["$scope","$location","clientService","clientUserService","collateralService",function(a,b,c,d,e){function f(){k(!0),g(),h(),i(0)}function g(){a.clientDetails=c.clientDetails,c.loadDetails(q,function(a){k("1"===a.active)})}function h(){d.loadList(q,n,function(){})}function i(b){l=b,a.collateralService.loadList(q,l,o,function(b){a.$broadcast("collateralResultsLoaded",b)})}function j(b,c){l=b,p=c,console.log(q,l,p,o),a.collateralService.search(q,p,l,o,function(b){a.$broadcast("collateralResultsLoaded",b)})}function k(b){m=b,a.activeStatusLabel=m?"Deactivate Client":"Reactivate Client"}a.clientService=c,a.clientUserService=d,a.collateralService=e;var l,m,n=!0,o=!0,p=null,q=b.search().id;a.users=d.users,a.$on("loadCollateralPage",function(a,b){i(b)}),a.$on("searchCollateral",function(a,b,c){p=c,void 0===p||0===p.length?i(b):j(b,c)}),a.showCollateral=function(a){b.path("/collateralDetail").search({id:a,clientID:q})},a.showClientUser=function(a){b.path("/clientUserDetail").search({id:a})},a.editClient=function(){b.path("editClient").search({id:q})},a.changeActiveStatus=function(){m?confirm("Are you sure you want to deactivate this client?")&&c.deactivate(q,function(){k(!1),alert("Client deactivated")}):c.reactivate(q,function(){k(!0),alert("Client reactivated")})},a.addUser=function(){b.path("addClientUser").search({companyID:q})},a.listActive=function(a){n=a,h()},a.getActiveClass=function(a){return n===a?"active":void 0},a.listActiveCollateral=function(a){o=a,i(0)},a.getActiveCollateralClass=function(a){return o===a?"active":void 0},f()}]).controller("CollateralSearchCtrl",["$scope",function(a){a.doSearch=function(){a.$emit("searchCollateral",0,a.searchString)}}]).controller("CollateralPager",["$scope","$http","$rootScope",function(a,b,c){function d(){$(".page-numbers a").removeClass("selected");var a=$($(".page-numbers a")[f]);a.addClass("selected")}var e=[],f=0;a.collateralPages=[],a.$on("collateralResultsLoaded",function(b,d){var f=c.collateralList.pageSize,g=Math.ceil(d/f),h=0;e.length=0;for(var i=0;g>i;i++)e.push({num:i+1,recordNum:h}),h+=f;angular.copy(e,a.collateralPages)}),a.prevCollateralPage=function(){f>0&&a.loadPage(f-1)},a.nextCollateralPage=function(){f<e.length-1&&a.loadPage(f+1)},a.loadCollateralPage=function(b){f=b;var c=e[b];a.$emit("loadCollateralPage",c.recordNum),d()},a.$on("pagerComplete",function(){d()})}]),angular.module("wplAdmin").controller("EditClientUserCtrl",["$scope","$http","$location","$rootScope","clientUserService",function(a,b,c,d,e){function f(){switch(h(),c.path()){case"/addClientUser":j=!0,a.title="Add New Client User",k="addClientUser";break;case"/editClientUser":j=!1,a.title="Edit Client User",k="updateClientUser",a.clientUserService=e,g()}}function g(){var b=c.search().id;a.clientUserService.loadDetails(b,function(b){angular.copy(b,a.user)})}function h(){n.push(new i("Test","User","testUser@company.com"))}function i(a,b,c){var d={};return d.first_name=a,d.last_name=b,d.email=c,d.confirm_email="confirmationEmail@company.com",d.phone="5555555555",d.phone2="5555555556",d}var j,k,l=c.search().companyID;a.form={},a.user={},a.save=function(b){b=angular.copy(a.user),b.company_id=l,e.save(b,k,function(){var a;a=j?"user added":"user updated",alert(a),c.path("clientDetail").search({id:l})})},a.cancel=function(){window.history.back()};var m=0;a.autofill=function(){var b=n[m++];angular.copy(b,a.user),m>=n.length&&(m=0)};var n=[];f()}]),angular.module("wplAdmin").controller("ClientUserDetailCtrl",["$scope","$location","clientUserService",function(a,b,c){function d(){e(!0)}function e(b){f=b,a.activeStatusLabel=f?"Deactivate User":"Reactivate User"}a.clientUserService=c;var f,g=b.search().id;a.details=c.details,c.loadDetails(g,function(a){e("1"===a.active)}),a.showClient=function(a){b.path("/clientDetail").search({id:a})},a.edit=function(){b.path("/editClientUser").search({id:g,companyID:c.client.guid})},a.resetPassword=function(){alert("Will generate a new password and email a reset link to the user's email address.")},a.changeActiveStatus=function(){f?confirm("Are you sure you want to deactivate this user?")&&c.deactivate(g,function(){e(!1),alert("Client user deactivated")}):c.reactivate(g,function(){e(!0),alert("Client user reactivated")})},d()}]),angular.module("wplAdmin").controller("EditAdminUserCtrl",["$scope","$http","$location","$rootScope","adminUserService",function(a,b,c,d,e){function f(){switch(h(),c.path()){case"/addAdminUser":j=!0,a.title="Add New Admin User",k="addAdminUser";break;case"/editAdminUser":j=!1,a.title="Edit Admin User",k="updateAdminUser",a.adminUserService=e,g()}}function g(){var b=c.search().id;a.adminUserService.loadDetails(b,function(b){angular.copy(b,a.user)})}function h(){m.push(new i("admin","admin@wpl.com"))}function i(a,b){var c={};return c.username=a,c.email=b,c}var j,k;a.form={},a.user={},a.save=function(b){b=angular.copy(a.user),b.action=k,e.save(b,k,function(){var a;a=j?"Admin user added":"Admin user updated",alert(a),c.path("listAdminUsers")})},a.cancel=function(){window.history.back()};var l=0;a.autofill=function(){var b=m[l++];angular.copy(b,a.user),l>=m.length&&(l=0)};var m=[];f()}]),angular.module("wplAdmin").controller("EditCollateralCtrl",["$scope","$http","$location","$rootScope","$cookieStore","$upload","$timeout","collateralService","clientService",function(a,b,c,d,e,f,g,h,i){function j(){switch(a.clientService=i,a.collateralService=h,c.path()){case"/addCollateral":o=!0,a.title="Add New Collateral",p="addCollateral";break;case"/editCollateral":o=!1,a.title="Edit Collateral",p="updateCollateral",m()}k(),l()}function k(){a.clientService.loadListAll(function(){})}function l(){a.collateralService.loadTypeList(function(){})}function m(){var b=c.search().id;a.collateralService.loadDetails(b,function(b){angular.copy(b,a.collateral)})}function n(a){console.log("onProgress",a)}var o,p;a.fileReaderSupported=null!=window.FileReader&&(null==window.FileAPI||0!=FileAPI.html5),a.collateral={},a.thumb={file:null,image:""},a.onThumbSelect=function(b){var c=b[0];if(a.thumb.file=c,a.collateral.thumbFile=b[0],a.fileReaderSupported&&c.type.indexOf("image")>-1){var d=new FileReader;d.readAsDataURL(c);{(function(b){b.onload=function(b){g(function(){a.thumb.image=b.target.result,a.$apply()})}})(d)}}},a.file={file:null},a.onFileSelect=function(b){console.log("file",b),a.collateral.file=b[0],a.file.file=b[0]},a.filesSelected=function(){return null!==a.thumb.file},a.save=function(){h.save(a.collateral,p,n,function(){var a;o?(a="collateral added",alert(a)):(a="collateral updated",alert(a))})},a.cancel=function(){window.history.back()};var q=0;a.autofill=function(){r[q++];angular.copy(q,a.company),q>=r.length&&(q=0)};var r=[];j()}]);var $=$;angular.module("wplAdmin").controller("AdminListCtrl",["$scope","$http","$location","$rootScope","adminUserService",function(a,b,c,d,e){function f(){g(0)}function g(b){h=b,a.adminUserService.loadList(h,i,function(){})}a.users=[],a.adminUserService=e,a.adminUserService.list=e.list;var h,i=!0;a.onAddUser=function(){c.path("/addAdminUser")},a.showUser=function(a){c.path("/editAdminUser").search({id:a})},a.listActive=function(a){i=a,g(0)},a.getActiveClass=function(a){return i===a?"active":void 0},f()}]).controller("Pager",function(a,b,c){function d(){$(".page-numbers a").removeClass("selected");var a=$($(".page-numbers a")[f]);a.addClass("selected")}var e=[],f=0;a.pages=[],a.$on("clientResultsLoaded",function(b,d){var f=c.clientList.pageSize,g=Math.ceil(d/f),h=0;e.length=0;for(var i=0;g>i;i++)e.push({num:i+1,recordNum:h}),h+=f;angular.copy(e,a.pages)}),a.prevPage=function(){f>0&&a.loadPage(f-1)},a.nextPage=function(){f<e.length-1&&a.loadPage(f+1)},a.loadPage=function(b){f=b;var c=e[b];a.$emit("loadClientPage",c.recordNum),d()},a.$on("pagerComplete",function(){d()})}),angular.module("wplAdmin").controller("ChangeAdminPasswordCtrl",["$scope","$http","$location","$rootScope","adminUserService",function(a,b,c,d,e){function f(){g(),e.loadDetails(i,function(){})}function g(){k.push(new h("admin","admin@wpl.com"))}function h(a,b){var c={};return c.old_password=a,c.password=b,c}a.adminUserService=e,a.form={},a.user={};var i=c.search().id;a.save=function(){var b=angular.copy(a.passwords);b.old_password=md5(b.old_password),b.password=md5(b.password),b.id=i,e.changePassword(b,function(a){var b=a.message;alert(b),a.success&&c.path("clientList")})};var j=0;a.autofill=function(){var b=k[j++];angular.copy(b,a.user),j>=k.length&&(j=0)};var k=[];f()}]),angular.module("wplAdmin").controller("CollateralDetailCtrl",["$scope","$location","collateralService","clientService",function(a,b,c,d){function e(){h(!0),f(),g()}function f(){d.loadDetails(k,function(){})}function g(){c.loadDetails(j,function(a){h("1"===a.active);c.getCollateralTypeLabel(a.type);c.details.type=c.getCollateralTypeLabel(a.type)})}function h(b){i=b,a.activeStatusLabel=i?"Deactivate":"Reactivate"}a.collateralService=c,a.clientService=d;var i,j=b.search().id,k=b.search().clientID;a.showClient=function(a){b.path("/clientDetail").search({id:a})},a.edit=function(){console.log(d.details),b.path("/editCollateral").search({id:j,companyID:d.details.guid})},a.changeActiveStatus=function(){i?confirm("Are you sure you want to deactivate this collateral?")&&c.deactivate(j,function(){h(!1),alert("Collateral deactivated")}):c.reactivate(j,function(){h(!0),alert("Collateral reactivated")})},e()}]);var $=$;angular.module("wplAdmin").controller("CollateralListCtrl",["$scope","$location","collateralService",function(a,b,c){function d(){e(0)}function e(b){g=b,a.collateralService.loadListFull(g,h,function(b){a.$broadcast("collateralResultsLoaded",b)})}function f(b,c){g=b,i=c,a.collateralService.searchAll(i,g,h,function(b){a.$broadcast("collateralResultsLoaded",b)})}a.collateralService=c;var g,h=!0,i=null;a.$on("loadCollateralPage",function(a,b){e(b)}),a.$on("searchCollateral",function(a,b,c){i=c,void 0===i||0===i.length?e(b):f(b,c)}),a.showCollateral=function(a,c){b.path("/collateralDetail").search({id:a,clientID:c})},a.listActiveCollateral=function(a){h=a,e(0)},a.getActiveCollateralClass=function(a){return h===a?"active":void 0},d()}]).controller("CollateralSearchAllCtrl",["$scope",function(a){a.doSearch=function(){a.$emit("searchCollateral",0,a.searchString)}}]).controller("CollateralAllPager",["$scope","$http","$rootScope",function(a,b,c){function d(){$(".page-numbers a").removeClass("selected");var a=$($(".page-numbers a")[f]);a.addClass("selected")}var e=[],f=0;a.collateralPages=[],a.$on("collateralResultsLoaded",function(b,d){var f=c.collateralList.pageSize,g=Math.ceil(d/f),h=0;e.length=0;for(var i=0;g>i;i++)e.push({num:i+1,recordNum:h}),h+=f;angular.copy(e,a.collateralPages)}),a.prevCollateralPage=function(){f>0&&a.loadPage(f-1)},a.nextCollateralPage=function(){f<e.length-1&&a.loadPage(f+1)},a.loadCollateralPage=function(b){f=b;var c=e[b];a.$emit("loadCollateralPage",c.recordNum),d()},a.$on("pagerComplete",function(){d()})}]);var hex_chr="0123456789abcdef".split("");"5d41402abc4b2a76b9719d911017c592"!=md5("hello");